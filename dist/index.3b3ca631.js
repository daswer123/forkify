function e(e,n,t,r){Object.defineProperty(e,n,{get:t,set:r,enumerable:!0,configurable:!0})}function n(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},a={},s=t.parcelRequire3a11;null==s&&((s=function(e){if(e in r)return r[e].exports;if(e in a){var n=a[e];delete a[e];var t={id:e,exports:{}};return r[e]=t,n.call(t.exports,t,t.exports),t.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,n){a[e]=n},t.parcelRequire3a11=s),s.register("c5HCY",(function(n,t){var r,a;e(n.exports,"register",(function(){return r}),(function(e){return r=e})),e(n.exports,"resolve",(function(){return a}),(function(e){return a=e}));var s={};r=function(e){for(var n=Object.keys(e),t=0;t<n.length;t++)s[n[t]]=e[n[t]]},a=function(e){var n=s[e];if(null==n)throw new Error("Could not resolve bundle with id "+e);return n}})),s("c5HCY").register(JSON.parse('{"1GqKL":"index.3b3ca631.js","7jJ3d":"icons.9801e6f1.svg"}'));var o;o=new URL(s("c5HCY").resolve("7jJ3d"),import.meta.url).toString();const c=new URL(o),d=function(e){return new Promise((function(n,t){setTimeout((function(){t(new Error(`Request took too long! Timeout after ${e} second`))}),1e3*e)}))},l=async e=>{const n=await Promise.race([fetch(e),d(10)]);if(!n.ok)throw new Error(n.statusText);return await n.json()},u={recipe:{},search:[],bookmarks:[],page:0};console.log(u);const p=()=>u.search.slice(15*u.page,15*(u.page+1)),h=e=>{u.bookmarks.push(e),u.recipe.bookmarked=!0},g=e=>{e.bookmarked?(e=>{const n=u.bookmarks.findIndex((n=>n.id===e.id));u.bookmarks=[...u.bookmarks.slice(0,n),...u.bookmarks.slice(n+1)],u.recipe.bookmarked=!1})(e):h(e)},v=async e=>{try{const{cookingTime:n,image:t,publisher:r,servings:a,sourceUrl:s,title:i}=e,o={title:i,source_url:s,image_url:t,cooking_time:n,publisher:r,servings:a,ingredients:Object.entries(e).filter((([e,n])=>e.includes("ingredient")&&""!==n)).map((([,e])=>{const n=e.split(",").map((e=>e.trim()));if(3!==n.length)throw new Error("Wrong Ingridient format! Please use the correct Format :)");const[t,r,a]=n;return{quantity:Number.isFinite(+t)&&""!==t?+t:null,unit:r,description:a}}))},{recipe:c}=(await(async(e,n)=>{const t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)},r=await Promise.race([fetch(`${e}?key=daed302b-f036-411b-9618-d5e212f17989`,t),d(10)]);if(!r.ok)throw new Error(r.statusText);return await r.json()})("https://forkify-api.herokuapp.com/api/v2/recipes/",o)).data;h(c),c.bookmarked=!0,u.recipe=c}catch(e){throw console.log(e),e}};var f;function m(e,n,t,r,a){const s=[2,3,5];if(!0===a)for(i=3;i*i<=e;i+=2)e%i==0&&s.push(i);let o=0,c=1,d=e,l=n;for(;o<=s.length;)d%s[o]==0&&l%s[o]==0?(c*=s[o],d/=s[o],l/=s[o]):o++;return function(e,n,t,r){return 1===e&&1===n?`${t=`${r}${(parseInt(t)+1).toString()}`}`:0===n?`${r}${t}`:"0"==t?`${r}${n}/${e}`:`${r}${t} ${n}/${e}`}(l,d,t,r)}f=function(e){let n;if(e<0?(e=Math.abs(e),n="-"):n="",void 0===e)return"Your input was undefined.";if(isNaN(e))return`"${e}" is not a number.`;if(1e16==e)return`${n}9999999999999999`;if(e>1e16)return"Too many digits in your integer to maintain IEEE 754 Floating Point conversion accuracy.";if(Number.isInteger(e))return`${n}${e}`;if(e<1e-6)return"0";const t=e.toString(),r=t.split(".");let a,s=r[0];if("0"==a&&"0"!==s)return s;if("0"==a&&"0"==s)return"0";if(a=t.length>=17?r[1].slice(0,r[1].length-1):r[1],"99"==a&&"0"!==s)return`${s} 99/100`;if("99"==a&&"0"==s)return"99/100";if(1-parseFloat(`.${a}`)<.0011&&(a="999"),null==a)return s;let o=a.split("").reverse().join("").match(/^(\d+)\1{1,2}/);if(o&&a.length>2){if(patternSequence=o[0].split("").reverse().join(""),endPattern=o[1].split("").reverse().join(""),endPattern.length>1){let e=endPattern.split(""),n=1;for(i=0;i<e.length;i++)n/=e[0]/e[i];1===n&&(endPattern=e[0])}return endPattern.length>1&&endPattern.length%2==0&&(endPattern=parseInt(endPattern.slice(0,endPattern.length/2),10)-parseInt(endPattern.slice(endPattern.length/2,endPattern.length),10)==0?endPattern.slice(0,endPattern.length/2):endPattern),function(e,n,t,r,a){const s=!0,i=e.length-t.length>=1?e.length-t.length:1,o=Math.pow(10,i),c=parseFloat(`0.${e}`),d=Math.pow(10,n.length),l=Math.round((c*d-c)*Math.pow(10,i));return m(l,(d-1)*o,r,a,s)}(a,endPattern,patternSequence,s,n)}return function(e,n,t){const r=!1,a=parseInt(e,10),s=Math.pow(10,e.length);return m(a,s,n,t,r)}(a,s,n)};var _=class{update(e){this.data=e;const n=this.generateMarkup(),t=document.createRange().createContextualFragment(n),r=Array.from(t.querySelectorAll("*")),a=Array.from(this.parentEl.querySelectorAll("*"));r.forEach(((e,n)=>{var t;const r=a[n];e.isEqualNode(r)||""===(null===(t=e.firstChild)||void 0===t?void 0:t.nodeValue.trim())||(r.textContent=e.textContent),e.isEqualNode(r)||Array.from(e.attributes).forEach((e=>{r.setAttribute(e.name,e.value)}))}))}renderSpiner(){const e=`\n        <div class="spinner">\n        <svg>\n          <use href="${c.pathname}#icon-loader"></use>\n        </svg>\n      </div>`;this.parentEl.innerHTML="",this.parentEl.insertAdjacentHTML("afterbegin",e)}renderError(e=this.errorMsg){this.parentEl.innerHTML="",this.parentEl.innerHTML=`\n        <div class="error">\n          <div>\n            <svg>\n              <use href="${c.pathname}}#icon-alert-triangle"></use>\n            </svg>\n          </div>\n          <p>${e}</p>\n        </div>\n              `}renderSuccesses(){this.parentEl.innerHTML="",this.parentEl.innerHTML=`\n      <div class="error">\n          <div>\n            <svg>\n              <use href="${c.pathname}}#icon-smile"></use>\n            </svg>\n          </div>\n          <p>${this.successesMsg}</p>\n        </div>\n`}constructor(e,n,t){this.parentEl=e,this.errorMsg=n,this.successesMsg=t}};var k=new class extends _{_generateIngMarkup(){return this.data.ingredients.reduce(((e,{quantity:t,unit:r,description:a})=>e+`<li class="recipe__ingredient">\n      <svg class="recipe__icon">\n        <use href="${c.pathname}#icon-check"></use>\n      </svg>\n      <div class="recipe__quantity">${t?n(f)(+t,2).toString():""}</div>\n      <div class="recipe__description">\n        <span class="recipe__unit">${r}</span>\n        ${a}\n      </div>\n    </li>`),"")}generateMarkup(){return`\n    <figure class="recipe__fig">\n    <img src="${this.data.image_url}" alt="${this.data.title}" class="recipe__img" />\n    <h1 class="recipe__title">\n      <span>${this.data.title}</span>\n    </h1>\n    </figure>\n\n    <div class="recipe__details">\n    <div class="recipe__info">\n      <svg class="recipe__info-icon">\n        <use href="${c.pathname}#icon-clock"></use>\n      </svg>\n      <span class="recipe__info-data recipe__info-data--minutes">${this.data.cooking_time}</span>\n      <span class="recipe__info-text">minutes</span>\n    </div>\n    <div class="recipe__info">\n      <svg class="recipe__info-icon">\n        <use href="${c.pathname}#icon-users"></use>\n      </svg>\n      <span class="recipe__info-data recipe__info-data--people">${this.data.servings}</span>\n      <span class="recipe__info-text">servings</span>\n\n      <div class="recipe__info-buttons">\n        <button class="btn--tiny btn--update-servings" data-update-to = ${this.data.servings-1}>\n          <svg>\n            <use href="${c.pathname}#icon-minus-circle"></use>\n          </svg>\n        </button>\n        <button class="btn--tiny btn--update-servings" data-update-to = ${this.data.servings+1}>\n          <svg>\n            <use href="${c.pathname}#icon-plus-circle"></use>\n          </svg>\n        </button>\n      </div>\n    </div>\n\n    ${"daed302b-f036-411b-9618-d5e212f17989"===this.data.key?`\n      <div class="recipe__user-generated">\n        <svg>\n          <use href="${c.pathname}#icon-user"></use>\n        </svg>\n      </div>\n      `:""}\n    \n    <button class="btn--round">\n      <svg class="">\n        <use href="${c.pathname}#icon-bookmark${this.data.bookmarked?"-fill":""}"></use>\n      </svg>\n    </button>\n    </div>\n\n    <div class="recipe__ingredients">\n    <h2 class="heading--2">Recipe ingredients</h2>\n    <ul class="recipe__ingredient-list">\n    ${this._generateIngMarkup()}\n\n    </ul>\n    </div>\n\n    <div class="recipe__directions">\n    <h2 class="heading--2">How to cook it</h2>\n    <p class="recipe__directions-text">\n      This recipe was carefully designed and tested by\n      <span class="recipe__publisher">${this.data.publisher}</span>. Please check out\n      directions at their website.\n    </p>\n    <a\n      class="btn--small recipe__btn"\n      href="${this.data.source_url}"\n      target="_blank"\n    >\n      <span>Directions</span>\n      <svg class="search__icon">\n        <use href="${c.pathname}#icon-arrow-right"></use>\n      </svg>\n    </a>\n    </div>`}render(e){this.data=e,this.parentEl.innerHTML="",this.parentEl.insertAdjacentHTML("beforeend",this.generateMarkup())}addEventHandlerSevings(e){this.parentEl.addEventListener("click",(n=>{const t=n.target.closest(".btn--update-servings");if(!t)return;console.log(t);const{updateTo:r}=t.dataset;0!=+r&&e(+r)}))}addBookmarkHandler(e){this.parentEl.addEventListener("click",(n=>{n.target.closest(".btn--round")&&e()}))}addEventHandler(e){window.addEventListener("hashchange",e),window.addEventListener("load",e)}renderSuccsses(e=this.succsessMsg){this.parentEl.innerHTML="",this.parentEl.innerHTML=`\n    <div class="error">\n      <div>\n        <svg>\n          <use href="${c.pathname}}#icon-smile"></use>\n        </svg>\n      </div>\n      <p>${e}</p>\n    </div>\n          `}constructor(){super(document.querySelector(".recipe"),"No recipes found for your query. Please try again!","Congrat you cool cheaf")}};var b=new class{addEventHandlers(e){this.searchForm.addEventListener("submit",(n=>{n.preventDefault(),e(this.searchInput.value),this.searchInput.value=""}))}constructor(){this.searchForm=document.querySelector(".search"),this.searchInput=document.querySelector(".search__field")}};var w=new class extends _{setData(e){this.data=e}render(){this.parentEl.innerHTML="",this.parentEl.innerHTML=this.generateMarkup()}createSearchItemMarkup(e){const n=window.location.hash.slice(1);return`\n    <li class="preview">\n            <a class="preview__link ${e.id===n?"preview__link--active":""}" href="#${e.id}">\n              <figure class="preview__fig">\n                <img src="${e.image_url}" alt="${e.title}" />\n              </figure>\n              <div class="preview__data">\n                <h4 class="preview__title">${e.title}</h4>\n                <p class="preview__publisher">${e.publisher}</p>\n                ${"daed302b-f036-411b-9618-d5e212f17989"===e.key?`\n                  <div class="recipe__user-generated">\n                    <svg>\n                      <use href="${c.pathname}#icon-user"></use>\n                    </svg>\n                  </div>\n                  `:""}\n              </div>\n            </a>\n          </li>\n      `}generateMarkup(){return this.data.reduce(((e,n)=>e+this.createSearchItemMarkup(n)),"")}constructor(){super(document.querySelector(".results"),"No recipes found for your query. Please try again!","Congrat you cool cheaf")}};var y=new class{nextPage(e){e.page++,this.render(e)}prevPage(e){e.page--,this.render(e)}addEventHandlers(e,n){this.parentEl.addEventListener("click",(t=>{t.target.closest(".pagination__btn--prev")&&(this.prevPage(n),e()),t.target.closest(".pagination__btn--next")&&(this.nextPage(n),e())}))}render(e){this.parentEl.innerHTML="",this.parentEl.insertAdjacentHTML("beforeend",this.generateMarkup(e))}generateMarkup(e){return`\n        ${0===e.page?"":`<button class="btn--inline pagination__btn--prev">\n            <svg class="search__icon">\n              <use href="${c.pathname}#icon-arrow-left"></use>\n            </svg>\n            <span>Page ${e.page}</span>\n           </button>`}\n            \n        ${e.search.length<=15*(e.page+1)?"":`\n        <button class="btn--inline pagination__btn--next">\n            <span>Page ${e.page+2}</span>\n            <svg class="search__icon">\n              <use href="${c.pathname}#icon-arrow-right"></use>\n            </svg>\n          </button>\n        `}\n          \n        </div>`}constructor(){this.parentEl=document.querySelector(".pagination")}};var $=new class{render(e){this.data=e,this.parentEl.innerHTML="",this.parentEl.insertAdjacentHTML("beforeend",this.generateMarkup()),0===this.data.length&&(this.parentEl.innerHTML=this.errorMsg)}createSearchItemMarkup(e){return`\n    <li class="preview">\n            <a class="preview__link" href="#${e.id}">\n              <figure class="preview__fig">\n                <img src="${e.image_url}" alt="${e.title}" />\n              </figure>\n              <div class="preview__data">\n                <h4 class="preview__title">${e.title}</h4>\n                <p class="preview__publisher">${e.publisher}</p>\n                ${"daed302b-f036-411b-9618-d5e212f17989"===e.key?`\n                  <div class="recipe__user-generated">\n                    <svg>\n                      <use href="${c.pathname}#icon-user"></use>\n                    </svg>\n                  </div>\n                  `:""}\n              </div>\n            </a>\n          </li>\n      `}generateMarkup(){return this.data.reduce(((e,n)=>e+this.createSearchItemMarkup(n)),"")}uploadBookmarsFromLocalStorage(){window.localStorage.setItem("bookmarks",JSON.stringify(this.data))}loadBookmarsFromLocalStorage(){const e=window.localStorage.getItem("bookmarks");if(e&&"undefined"!==e)return this.data=JSON.parse(e),this.render(this.data),this.data}constructor(){this.data=[],this.parentEl=document.querySelector(".bookmarks__list"),this.errorMsg=`<div class="message">\n    <div>\n      <svg>\n        <use href="${c.pathname}#icon-smile"></use>\n      </svg>\n    </div>\n    <p>\n      No bookmarks yet. Find a nice recipe and bookmark it :)\n    </p>\n  </div>\n  `}};var E=new class extends _{render(){}addHanlderToggleWindow(){this.overlay.addEventListener("click",this.toggleForm.bind(this)),this.addBtn.addEventListener("click",this.toggleForm.bind(this)),this.closeBtn.addEventListener("click",this.toggleForm.bind(this))}addHanlderUpload(e){this.parentEl.addEventListener("submit",(function(n){n.preventDefault();const t=[...new FormData(this)],r=Object.fromEntries(t);e(r)}))}toggleForm(){this.overlay.classList.toggle("hidden"),this.window.classList.toggle("hidden")}constructor(){super(document.querySelector(".upload"),"Something get wrong","Successes Your recipy was uploaded"),this.overlay=document.querySelector(".overlay"),this.window=document.querySelector(".add-recipe-window"),this.addBtn=document.querySelector(".nav__btn--add-recipe"),this.closeBtn=document.querySelector(".btn--close-modal"),this.addHanlderToggleWindow()}};const M=async()=>{try{const e=window.location.hash.slice(1);if(!e)return;k.renderSpiner(),w.update(p()),await(async e=>{try{const n=`https://forkify-api.herokuapp.com/api/v2/recipes//${e}?daed302b-f036-411b-9618-d5e212f17989`,{recipe:t}=(await l(n)).data;u.recipe=t,u.bookmarks.some((e=>e.id===t.id))?u.recipe.bookmarked=!0:u.recipe.bookmarked=!1}catch(e){throw new Error(e)}})(e),console.log(u.recipe),k.render(u.recipe)}catch(e){console.log(e),k.renderError()}},S=()=>{w.setData(p()),w.render()},H=async e=>{try{if(w.renderSpiner(),await(async e=>{try{const n=`https://forkify-api.herokuapp.com/api/v2/recipes?search=${e}&key=daed302b-f036-411b-9618-d5e212f17989`,{recipes:t}=(await l(n)).data;u.search=t}catch(e){throw new Error(e)}})(e),!u.search.length)throw new Error("No match result");w.setData(u.search),w.render(),u.page=0,y.render(u),S()}catch(e){console.log(e),w.renderError()}},L=e=>{var n;n=e,u.recipe.ingredients.forEach((e=>{e.quantity&&(e.quantity=Math.round(e.quantity/u.recipe.servings*n*100)/100)})),u.recipe.servings=n,k.update(u.recipe)},T=()=>{g(u.recipe),k.update(u.recipe),$.render(u.bookmarks),$.uploadBookmarsFromLocalStorage()},P=async e=>{try{E.renderSpiner(),await v(e),k.render(u.recipe),$.uploadBookmarsFromLocalStorage(u.bookmarks),$.render(u.bookmarks),E.renderSuccesses("Your recept successes was upload, GOOD ✨✨✨"),window.location.hash=u.recipe.id,setTimeout((()=>location.reload()),1e3)}catch(e){E.renderError("Opps, something get wrong try again"),setTimeout((()=>location.reload()),1e3)}};k.addEventHandler(M),k.addEventHandlerSevings(L),k.addBookmarkHandler(T),b.addEventHandlers(H),y.addEventHandlers(S,u),E.addHanlderUpload(P),$.loadBookmarsFromLocalStorage();
//# sourceMappingURL=index.3b3ca631.js.map
